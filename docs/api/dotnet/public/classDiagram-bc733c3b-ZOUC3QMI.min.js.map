{
  "version": 3,
  "sources": ["../../node_modules/mermaid/dist/classDiagram-bc733c3b.js"],
  "sourcesContent": ["import { p as parser, d as db, s as styles } from \"./styles-aefe6593.js\";\nimport { select } from \"d3\";\nimport { layout } from \"dagre-d3-es/src/dagre/index.js\";\nimport * as graphlib from \"dagre-d3-es/src/graphlib/index.js\";\nimport { c as getConfig, l as log, i as configureSvgSize } from \"./mermaid-b0ad2de1.js\";\nimport { s as svgDraw } from \"./svgDraw-0fcc813d.js\";\nimport \"ts-dedent\";\nimport \"dayjs\";\nimport \"@braintree/sanitize-url\";\nimport \"dompurify\";\nimport \"khroma\";\nimport \"lodash-es/memoize.js\";\nimport \"stylis\";\nimport \"lodash-es/isEmpty.js\";\nlet idCache = {};\nconst padding = 20;\nconst getGraphId = function(label) {\n  const foundEntry = Object.entries(idCache).find((entry) => entry[1].label === label);\n  if (foundEntry) {\n    return foundEntry[0];\n  }\n};\nconst insertMarkers = function(elem) {\n  elem.append(\"defs\").append(\"marker\").attr(\"id\", \"extensionStart\").attr(\"class\", \"extension\").attr(\"refX\", 0).attr(\"refY\", 7).attr(\"markerWidth\", 190).attr(\"markerHeight\", 240).attr(\"orient\", \"auto\").append(\"path\").attr(\"d\", \"M 1,7 L18,13 V 1 Z\");\n  elem.append(\"defs\").append(\"marker\").attr(\"id\", \"extensionEnd\").attr(\"refX\", 19).attr(\"refY\", 7).attr(\"markerWidth\", 20).attr(\"markerHeight\", 28).attr(\"orient\", \"auto\").append(\"path\").attr(\"d\", \"M 1,1 V 13 L18,7 Z\");\n  elem.append(\"defs\").append(\"marker\").attr(\"id\", \"compositionStart\").attr(\"class\", \"extension\").attr(\"refX\", 0).attr(\"refY\", 7).attr(\"markerWidth\", 190).attr(\"markerHeight\", 240).attr(\"orient\", \"auto\").append(\"path\").attr(\"d\", \"M 18,7 L9,13 L1,7 L9,1 Z\");\n  elem.append(\"defs\").append(\"marker\").attr(\"id\", \"compositionEnd\").attr(\"refX\", 19).attr(\"refY\", 7).attr(\"markerWidth\", 20).attr(\"markerHeight\", 28).attr(\"orient\", \"auto\").append(\"path\").attr(\"d\", \"M 18,7 L9,13 L1,7 L9,1 Z\");\n  elem.append(\"defs\").append(\"marker\").attr(\"id\", \"aggregationStart\").attr(\"class\", \"extension\").attr(\"refX\", 0).attr(\"refY\", 7).attr(\"markerWidth\", 190).attr(\"markerHeight\", 240).attr(\"orient\", \"auto\").append(\"path\").attr(\"d\", \"M 18,7 L9,13 L1,7 L9,1 Z\");\n  elem.append(\"defs\").append(\"marker\").attr(\"id\", \"aggregationEnd\").attr(\"refX\", 19).attr(\"refY\", 7).attr(\"markerWidth\", 20).attr(\"markerHeight\", 28).attr(\"orient\", \"auto\").append(\"path\").attr(\"d\", \"M 18,7 L9,13 L1,7 L9,1 Z\");\n  elem.append(\"defs\").append(\"marker\").attr(\"id\", \"dependencyStart\").attr(\"class\", \"extension\").attr(\"refX\", 0).attr(\"refY\", 7).attr(\"markerWidth\", 190).attr(\"markerHeight\", 240).attr(\"orient\", \"auto\").append(\"path\").attr(\"d\", \"M 5,7 L9,13 L1,7 L9,1 Z\");\n  elem.append(\"defs\").append(\"marker\").attr(\"id\", \"dependencyEnd\").attr(\"refX\", 19).attr(\"refY\", 7).attr(\"markerWidth\", 20).attr(\"markerHeight\", 28).attr(\"orient\", \"auto\").append(\"path\").attr(\"d\", \"M 18,7 L9,13 L14,7 L9,1 Z\");\n};\nconst draw = function(text, id, _version, diagObj) {\n  const conf = getConfig().class;\n  idCache = {};\n  log.info(\"Rendering diagram \" + text);\n  const securityLevel = getConfig().securityLevel;\n  let sandboxElement;\n  if (securityLevel === \"sandbox\") {\n    sandboxElement = select(\"#i\" + id);\n  }\n  const root = securityLevel === \"sandbox\" ? select(sandboxElement.nodes()[0].contentDocument.body) : select(\"body\");\n  const diagram2 = root.select(`[id='${id}']`);\n  insertMarkers(diagram2);\n  const g = new graphlib.Graph({\n    multigraph: true\n  });\n  g.setGraph({\n    isMultiGraph: true\n  });\n  g.setDefaultEdgeLabel(function() {\n    return {};\n  });\n  const classes = diagObj.db.getClasses();\n  const keys = Object.keys(classes);\n  for (const key of keys) {\n    const classDef = classes[key];\n    const node = svgDraw.drawClass(diagram2, classDef, conf, diagObj);\n    idCache[node.id] = node;\n    g.setNode(node.id, node);\n    log.info(\"Org height: \" + node.height);\n  }\n  const relations = diagObj.db.getRelations();\n  relations.forEach(function(relation) {\n    log.info(\n      \"tjoho\" + getGraphId(relation.id1) + getGraphId(relation.id2) + JSON.stringify(relation)\n    );\n    g.setEdge(\n      getGraphId(relation.id1),\n      getGraphId(relation.id2),\n      {\n        relation\n      },\n      relation.title || \"DEFAULT\"\n    );\n  });\n  const notes = diagObj.db.getNotes();\n  notes.forEach(function(note) {\n    log.debug(`Adding note: ${JSON.stringify(note)}`);\n    const node = svgDraw.drawNote(diagram2, note, conf, diagObj);\n    idCache[node.id] = node;\n    g.setNode(node.id, node);\n    if (note.class && note.class in classes) {\n      g.setEdge(\n        note.id,\n        getGraphId(note.class),\n        {\n          relation: {\n            id1: note.id,\n            id2: note.class,\n            relation: {\n              type1: \"none\",\n              type2: \"none\",\n              lineType: 10\n            }\n          }\n        },\n        \"DEFAULT\"\n      );\n    }\n  });\n  layout(g);\n  g.nodes().forEach(function(v) {\n    if (v !== void 0 && g.node(v) !== void 0) {\n      log.debug(\"Node \" + v + \": \" + JSON.stringify(g.node(v)));\n      root.select(\"#\" + (diagObj.db.lookUpDomId(v) || v)).attr(\n        \"transform\",\n        \"translate(\" + (g.node(v).x - g.node(v).width / 2) + \",\" + (g.node(v).y - g.node(v).height / 2) + \" )\"\n      );\n    }\n  });\n  g.edges().forEach(function(e) {\n    if (e !== void 0 && g.edge(e) !== void 0) {\n      log.debug(\"Edge \" + e.v + \" -> \" + e.w + \": \" + JSON.stringify(g.edge(e)));\n      svgDraw.drawEdge(diagram2, g.edge(e), g.edge(e).relation, conf, diagObj);\n    }\n  });\n  const svgBounds = diagram2.node().getBBox();\n  const width = svgBounds.width + padding * 2;\n  const height = svgBounds.height + padding * 2;\n  configureSvgSize(diagram2, height, width, conf.useMaxWidth);\n  const vBox = `${svgBounds.x - padding} ${svgBounds.y - padding} ${width} ${height}`;\n  log.debug(`viewBox ${vBox}`);\n  diagram2.attr(\"viewBox\", vBox);\n};\nconst renderer = {\n  draw\n};\nconst diagram = {\n  parser,\n  db,\n  renderer,\n  styles,\n  init: (cnf) => {\n    if (!cnf.class) {\n      cnf.class = {};\n    }\n    cnf.class.arrowMarkerAbsolute = cnf.arrowMarkerAbsolute;\n    db.clear();\n  }\n};\nexport {\n  diagram\n};\n"],
  "mappings": "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",
  "names": ["import_dayjs", "import_sanitize_url", "import_dompurify", "idCache", "padding", "getGraphId", "label", "foundEntry", "entry", "insertMarkers", "elem", "draw", "text", "id", "_version", "diagObj", "conf", "getConfig$1", "log$1", "securityLevel", "sandboxElement", "select_default", "root", "diagram2", "g", "Graph", "classes", "keys", "key", "classDef", "node", "svgDraw", "relation", "note", "layout", "v", "e", "svgBounds", "width", "height", "configureSvgSize", "vBox", "renderer", "diagram", "parser$1", "db", "styles", "cnf"]
}
