<!DOCTYPE html><html lang="en" class="loading"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><title>Changes</title><link href="../dossier.css" rel="stylesheet" type="text/css"><header><button class="dossier-menu"><i class="material-icons">menu</i></button><form><input type="search" placeholder="Search" tabindex="1"><i class="material-icons">search</i></form></header><nav class="dossier-nav"></nav><div class="content"><main><article class="page"><h2>v3.3.0</h2>
<ul><li>
<p>Added warning log messages when the user creates new managed promises, or
schedules unchained tasks. Users may opt in to printing these log messages
with</p>
<pre><code class="language-js">const {logging} &#61; require(&#39;selenium-webdriver&#39;);
logging.installConsoleHandler();
logging.getLogger(&#39;promise.ControlFlow&#39;).setLevel(logging.Level.WARNING);
</code></pre>
</li><li>
<p>If the <code>JAVA_HOME</code> environment variable is set, use it to locate java.exe.</p>
</li></ul>
<h2>v3.2.0</h2>
<ul><li>Release skipped to stay in sync with the main Selenium project.</li></ul>
<h2>v3.1.0</h2>
<ul><li>The <code>lib</code> package is once again platform agnostic (excluding <code>lib/devmode</code>).</li><li>Deprecated <code>promise.when(value, callback, errback)</code>.
Use <code>promise.fulfilled(value).then(callback, errback)</code></li><li>Changed <code>promise.fulfilled(value)</code>, <code>promise.rejected(reason)</code> and
<code>promise.defer()</code> to all use native promises when the promise manager is
disabled.</li><li>Properly handle W3C error responses to new session commands.</li><li>Updated <code>selenium-webdriver/testing</code> to export <code>describe.only</code> along with
<code>describe.skip</code>.</li><li>Fixed <code>selenium-webdriver/lib/until.ableToSwitchToFrame</code>. It was previously
dropping arguments and would never work.</li><li>Added the ability to use Firefox Nightly</li><li>If Firefox cannot be found in the default location, look for it on the PATH</li><li>Allow SafariDriver to use Safari Technology Preview.</li><li>Use the proper wire command for WebElement.getLocation() and
WebElement.getSize() for W3C compliant drivers.</li></ul>
<h2>v3.0.1</h2>
<ul><li>More API adjustments to align with native Promises
<ul><li>Deprecated <code>promise.fulfilled(value)</code>, use <code>promise.Promise#resolve(value)</code></li><li>Deprecated <code>promise.rejected(reason)</code>, use <code>promise.Promise#reject(reason)</code></li></ul>
</li><li>When a <code>wait()</code> condition times out, the returned promise will now be
rejected with an <code>error.TimeoutError</code> instead of a generic <code>Error</code> object.</li><li><code>WebDriver#wait()</code> will now throw a TypeError if an invalid wait condition is
provided.</li><li>Properly catch unhandled promise rejections with an action sequence (only
impacts when the promise manager is disabled).</li></ul>
<h2>v3.0.0</h2>
<ul><li>
<p>(<strong>NOTICE</strong>) The minimum supported version of Node is now 6.9.0 LTS</p>
</li><li>
<p>Removed support for the SafariDriver browser extension. This has been
replaced by Apple&#39;s safaridriver, which is included wtih Safari 10
(available on OS X El Capitan and macOS Sierra).</p>
<p>To use Safari 9 or older, users will have to use an older version of Selenium.</p>
</li><li>
<p>geckodriver v0.11.0 or newer is now required for Firefox.</p>
</li><li>
<p>Fixed potential reference errors in <code>selenium-webdriver/testing</code> when users
create a cycle with mocha by running with mocha&#39;s <code>--hook</code> flag.</p>
</li><li>
<p>Fixed <code>WebDriver.switchTo().activeElement()</code> to use the correct HTTP method
for compatibility with the W3C spec.</p>
</li><li>
<p>Update the <code>selenium-webdriver/firefox</code> module to use geckodriver&#39;s
&#34;moz:firefoxOptions&#34; dictionary for Firefox-specific configuration values.</p>
</li><li>
<p>Extending the <code>selenium-webdriver/testing</code> module to support tests defined
using generator functions.</p>
</li><li>
<p>The promise manager can be disabled by setting an enviornment variable:
<code>SELENIUM_PROMISE_MANAGER&#61;0</code>. This is part of a larger plan to remove the
promise manager, as documented at
<a href="https://github.com/SeleniumHQ/selenium/issues/2969">https://github.com/SeleniumHQ/selenium/issues/2969</a></p>
</li><li>
<p>When communicating with a W3C-compliant remote end, use the atoms library for
the <code>WebElement.getAttribute()</code> and <code>WebElement.isDisplayed()</code> commands. This
behavior is consistent with the java, .net, python, and ruby clients.</p>
</li></ul>
<h3>API Changes</h3>
<ul><li>Removed <code>safari.Options#useLegacyDriver()</code></li><li>Reduced the API on <code>promise.Thenable</code> for compatibility with native promises:
<ul><li>Removed <code>#isPending()</code></li><li>Removed <code>#cancel()</code></li><li>Removed <code>#finally()</code></li></ul>
</li><li>Changed all subclasses of <code>webdriver.WebDriver</code> to overload the static
function <code>WebDriver.createSession()</code> instead of doing work in the
constructor. All constructors now inherit the base class&#39; function signature.
Users are still encouraged to use the <code>Builder</code> class instead of creating
drivers directly.</li><li><code>Builder#build()</code> now returns a &#34;thenable&#34; WebDriver instance, allowing users
to immediately schedule commands (as before), or issue them through standard
promise callbacks. This is the same pattern already employed for WebElements.</li><li>Removed <code>Builder#buildAsync()</code> as it was redundant with the new semantics of
<code>build()</code>.</li></ul>
<h2>v3.0.0-beta-3</h2>
<ul><li>Fixed a bug where the promise manager would silently drop callbacks after
recovering from an unhandled promise rejection.</li><li>Added the <code>firefox.ServiceBuilder</code> class, which may be used to customize the
geckodriver used for <code>firefox.Driver</code> instances.</li><li>Added support for Safari 10 safaridriver. safaridriver may be disabled
via tha API, <code>safari.Options#useLegacyDriver</code>, to use the safari
extension driver.</li><li>Updated the <code>lib/proxy</code> module to support configuring a SOCKS proxy.</li><li>For the <code>promise.ControlFlow</code>, fire the &#34;uncaughtException&#34; event in a new
turn of the JS event loop. As a result of this change, any errors thrown by
an event listener will propagate to the global error handler. Previously,
this event was fired with in the context of a (native) promise callback,
causing errors to be silently suppressed in the promise chain.</li></ul>
<h3>API Changes</h3>
<ul><li>Added <code>remote.DriverService.Builder</code> as a base class for configuring
DriverService instances that run in a child-process. The
<code>chrome.ServiceBuilder</code>, <code>edge.ServiceBuilder</code>, and <code>opera.ServiceBuilder</code>
classes now all extend this base class with browser-specific options.</li><li>For each of the ServiceBuilder clases, renamed <code>usingPort</code> and
<code>withEnvironment</code> to <code>setPort</code> and <code>setEnvironment</code>, respectively.</li><li>Renamed <code>chrome.ServiceBuilder#setUrlBasePath</code> to <code>#setPath</code></li><li>Changed the signature of the <code>firefox.Driver</code> from <code>(config, flow, executor)</code>
to <code>(config, executor, flow)</code>.</li><li>Exposed the <code>Condition</code> and <code>WebElementCondition</code> classes from the top-level
<code>selenium-webdriver</code> module (these were previously only available from
<code>lib/webdriver</code>).</li></ul>
<h3>Changes for W3C WebDriver Spec Compliance</h3>
<ul><li>Updated command mappings for <a href="https://w3c.github.io/webdriver/webdriver-spec.html#get-window-position">getting</a>
and <a href="https://w3c.github.io/webdriver/webdriver-spec.html#set-window-position">setting</a>
the window position.</li></ul>
<h2>v3.0.0-beta-2</h2>
<h3>API Changes</h3>
<ul><li>Moved the <code>builder.Builder</code> class into the main module (<code>selenium-webdriver</code>).</li><li>Removed the <code>builder</code> module.</li><li>Fix <code>webdriver.WebDriver#setFileDetector</code> when driving Chrome or Firefox on a
remote machine.</li></ul>
<h2>v3.0.0-beta-1</h2>
<ul><li>Allow users to set the agent used for HTTP connections through
<code>builder.Builder#usingHttpAgent()</code></li><li>Added new wait conditions: <code>until.urlIs()</code>, <code>until.urlContains()</code>,
<code>until.urlMatches()</code></li><li>Added work around for <a href="https://bugzilla.mozilla.org/show_bug.cgi?id&#61;1274924">GeckoDriver bug</a>
raising a type conversion error</li><li>Internal cleanup replacing uses of managed promises with native promises</li><li>Removed the mandatory use of Firefox Dev Edition, when using Marionette driver</li><li>Fixed timeouts&#39; URL</li><li>Properly send HTTP requests when using a WebDriver server proxy</li><li>Properly configure proxies when using the geckodriver</li><li><code>http.Executor</code> now accepts a promised client. The <code>builder.Builder</code> class
will now use this instead of a <code>command.DeferredExecutor</code> when creating
WebDriver instances.</li><li>For Chrome and Firefox, the <code>builder.Builder</code> class will always return an
instanceof <code>chrome.Driver</code> and <code>firefox.Driver</code>, respectively, even when
configured to use a remote server (from <code>builder.Builder#usingServer(url)</code>,
<code>SELENIUM_REMOTE_URL</code>, etc).</li></ul>
<h3>API Changes</h3>
<ul><li><code>promise.Deferred</code> is no longer a thenable object.</li><li><code>Options#addCookie()</code> now takes a record object instead of 7 individual
parameters. A TypeError will be thrown if addCookie() is called with invalid
arguments.</li><li>When adding cookies, the desired expiry must be provided as a Date or in
<em>seconds</em> since epoch. When retrieving cookies, the expiration is always
returned in seconds.</li><li>Renamed <code>firefox.Options#useMarionette</code> to <code>firefox.Options#useGeckoDriver</code></li><li>Removed deprecated modules:
<ul><li><code>selenium-webdriver/error</code> (use <code>selenium-webdriver/lib/error</code>,<br />
or the <code>error</code> property exported by <code>selenium-webdriver</code>)</li><li><code>selenium-webdriver/executors</code> — this was not previously deprecated, but
is no longer used.</li></ul>
</li><li>Removed deprecated types:
<ul><li><code>command.DeferredExecutor</code> — this was not previously deprecated, but is no
longer used. It can be trivially implemented by clients should it be
needed.</li><li><code>error.InvalidSessionIdError</code> (use <code>error.NoSuchSessionError</code>)</li><li><code>executors.DeferredExecutor</code></li><li><code>until.Condition</code> (use <code>webdriver.Condition</code>)</li><li><code>until.WebElementCondition</code> (use <code>webdriver.WebElementCondition</code>)</li><li><code>webdriver.UnhandledAlertError</code> (use <code>error.UnexpectedAlertOpenError</code>)</li></ul>
</li><li>Removed deprecated functions:
<ul><li><code>Deferred#cancel()</code></li><li><code>Deferred#catch()</code></li><li><code>Deferred#finally()</code></li><li><code>Deferred#isPending()</code></li><li><code>Deferred#then()</code></li><li><code>Promise#thenCatch()</code></li><li><code>Promise#thenFinally()</code></li><li><code>WebDriver#isElementPresent()</code></li><li><code>WebElement#getInnerHtml()</code></li><li><code>WebElement#getOuterHtml()</code></li><li><code>WebElement#getRawId()</code></li><li><code>WebElement#isElementPresent()</code></li></ul>
</li><li>Removed deprecated properties:
<ul><li><code>WebDriverError#code</code></li></ul>
</li></ul>
<h2>v2.53.2</h2>
<ul><li>Changed <code>io.exists()</code> to return a rejected promise if the input path is not
a string</li><li>Deprecated <code>Promise#thenFinally()</code> - use <code>Promise#finally()</code>. The thenFinally
shim added to the promise module in v2.53.0 will be removed in v3.0
Sorry for the churn!</li><li>FIXED: capabilities serialization now properly handles undefined vs.
false-like values.</li><li>FIXED: properly handle responses from the remote end in
<code>WebDriver.attachToSession</code></li></ul>
<h2>v2.53.1</h2>
<ul><li>FIXED: for consistency with the other language bindings, <code>remote.FileDetector</code>
will ignore paths that refer to a directory.</li></ul>
<h2>v2.53.0</h2>
<h3>Change Summary</h3>
<ul><li>
<p>Added preliminary support for Marionette, Mozilla&#39;s WebDriver implementation
for Firefox. Marionette may be enabled via the API,
<code>firefox.Options#useMarionette</code>, or by setting the <code>SELENIUM_MARIONETTE</code>
environment variable.</p>
</li><li>
<p>Moved all logic for parsing and interpreting responses from the remote end
into the individual <code>command.Executor</code> implementations.</p>
</li><li>
<p>For consistency with the other Selenium language bindings,
<code>WebDriver#isElementPresent()</code> and <code>WebElement#isElementPresent()</code> have
been deprecated. These methods will be removed in v3.0. Use the findElements
command to test for the presence of an element:</p>
<pre><code>driver.findElements(By.css(&#39;.foo&#39;)).then(found &#61;&gt; !!found.length);
</code></pre>
</li><li>
<p>Added support for W3C-spec compliant servers.</p>
</li><li>
<p>For consistent naming, deprecating <code>error.InvalidSessionIdError</code> in favor of
<code>error.NoSuchSessionError</code>.</p>
</li><li>
<p>Moved the <code>error</code> module to <code>lib/error</code> so all core modules are co-located.
The top-level <code>error</code> module will be removed in v3.0.</p>
</li><li>
<p>Moved <code>until.Condition</code> and <code>until.WebElementCondition</code> to the webdriver
module to break a circular dependency.</p>
</li><li>
<p>Added support for setting the username and password in basic auth pop-up
dialogs (currently IE only).</p>
</li><li>
<p>Deprecated <code>WebElement#getInnerHtml()</code> and <code>WebEleemnt#getOuterHtml()</code></p>
</li><li>
<p>Deprecated <code>Promise#thenCatch()</code> - use <code>Promise#catch()</code> instead</p>
</li><li>
<p>Deprecated <code>Promise#thenFinally()</code> - use <code>promise.thenFinally()</code> instead</p>
</li><li>
<p>FIXED: <code>io.findInPath()</code> will no longer match against directories that have
the same basename as the target file.</p>
</li><li>
<p>FIXED: <code>phantomjs.Driver</code> now takes a third argument that defines the path to
a log file to use for the phantomjs executable&#39;s output. This may be quickly
set at runtime with the <code>SELENIUM_PHANTOMJS_LOG</code> environment variable.</p>
</li></ul>
<h3>Changes for W3C WebDriver Spec Compliance</h3>
<ul><li>Changed <code>element.sendKeys(...)</code> to send the key sequence as an array where
each element defines a single key. The legacy wire protocol permits arrays
where each element is a string of arbitrary length. This change is solely
at the protocol level and should have no user-visible effect.</li></ul>
<h2>v2.52.0</h2>
<h3>Notice</h3>
<p>Starting with v2.52.0, each release of selenium-webdriver will support the
latest <em>minor</em> LTS and stable Node releases. All releases between the LTS and
stable release will have best effort support. Further details are available in
the selenium-webdriver package README.</p>
<h3>Change Summary</h3>
<ul><li>Add support for Microsoft&#39;s Edge web browser</li><li>Added <code>webdriver.Builder#buildAsync()</code>, which returns a promise that will be
fulfilled with the newly created WebDriver instance once the associated
browser has been full initialized. This is purely a convenient alternative
to the existing build() method as the WebDriver class will always defer
commands until it has a fully created browser.</li><li>Added <code>firefox.Profile#setHost()</code> which may be used to set the host that
the FirefoxDriver&#39;s server listens for commands on. The server uses
&#34;localhost&#34; by default.</li><li>Added <code>promise.Promise#catch()</code> for API compatibility with native Promises.
<code>promise.Promise#thenCatch()</code> is not yet deprecated, but it simply
delegates to <code>catch</code>.</li><li>Changed some <code>io</code> operations to use native promises.</li><li>Changed <code>command.Executor#execute()</code> and <code>HttpClient#send()</code> to return
promises instead of using callback passing.</li><li>Replaced the <code>Serializable</code> class with an internal, Symbol-defined method.</li><li>Changed the <code>Capabilities</code> class to extend the native <code>Map</code> type.</li><li>Changed the <code>Capabilities.has(key)</code> to only test if a capability has been set
(Map semantics). To check whether the value is true, use <code>get(key)</code>.</li><li>Deprecated <code>executors.DeferredExecutor</code> in favor of
<code>lib/command.DeferredExecutor</code>.</li><li>API documentation is no longer distributed with the npm package, but remains
available at <a href="http://seleniumhq.github.io/selenium/docs/api/javascript/">http://seleniumhq.github.io/selenium/docs/api/javascript/</a></li><li>Rewrote the <code>error</code> module to export an Error subtype for each type of error
defined in the <a href="https://w3c.github.io/webdriver/webdriver-spec.html#handling-errors">W3C WebDriver spec</a>.</li><li>Changed the <code>http.Request</code> and <code>http.Response</code> classes to store headers in
maps instead of object literals.</li><li>Updated <code>ws</code> dependency to version <code>1.0.1</code>.</li><li>Removed fluent predicates &#34;is&#34; and &#34;not&#34; from the experimental
<code>testing/assert</code> module.</li><li>Wait conditions that locate an element, or that wait on an element&#39;s state,
will return a WebElementPromise.</li><li>Lots of internal clean-up to break selenium-webdriver&#39;s long standing
dependency on Google&#39;s Closure library.</li></ul>
<h3>Changes for W3C WebDriver Spec Compliance</h3>
<ul><li>Updated the <code>By</code> locators that are not in the W3C spec to delegated to using
CSS selectors: <code>By.className</code>, <code>By.id</code>, <code>By.name</code>, and <code>By.tagName</code>.</li></ul>
<h2>v2.49-51</h2>
<ul><li><em>Releases skipped to stay in sync with the rest of the Selenium project</em></li></ul>
<h2>v2.48.2</h2>
<ul><li>Added <code>WebElement#takeScreenshot()</code>.</li><li>More adjustments to promise callback tracking.</li></ul>
<h2>v2.48.1</h2>
<ul><li>FIXED: Adjusted how the control flow tracks promise callbacks to avoid a
potential deadlock.</li></ul>
<h2>v2.48.0</h2>
<ul><li>
<p>Node v0.12.x users must run with --harmony. <em>This is the last release that
will support v0.12.x</em></p>
</li><li>
<p>FIXED: (Promise/A&#43; compliance) When a promise is rejected with a thenable,
the promise adopts the thenable as its rejection reason instead of waiting
for it to settle. The previous (incorrect) behavior was hidden by bugs in
the <code>promises-aplus-tests</code> compliance test suite that were fixed in version
<code>2.1.1</code>.</p>
</li><li>
<p>FIXED: the <code>webdriver.promise.ControlFlow</code> now has a consistent execution
order for tasks/callbacks scheduled in different turns of the JS event loop.
Refer to the <code>webdriver.promise</code> documentation for more details.</p>
</li><li>
<p>FIXED: do not drop user auth from the WebDriver server URL.</p>
</li><li>
<p>FIXED: a single <code>firefox.Binary</code> instance may be used to configure and
launch multiple FirefoxDriver sessions.</p>
<pre><code>var binary &#61; new firefox.Binary();
var options &#61; new firefox.Options().setBinary(binary);
var builder &#61; new Builder().setFirefoxOptions(options);

var driver1 &#61; builder.build();
var driver2 &#61; builder.build();
</code></pre>
</li><li>
<p>FIXED: zip files created for transfer to a remote WebDriver server are no
longer compressed. If the zip contained a file that was already compressed,
the server would return an &#34;invalid code lengths set&#34; error.</p>
</li><li>
<p>FIXED: Surfaced the <code>loopback</code> option to <code>remote/SeleniumServer</code>. When set,
the server will be accessed using the current host&#39;s loopback address.</p>
</li></ul>
<h2>v2.47.0</h2>
<h3>Notice</h3>
<p>This is the last release for <code>selenium-webdriver</code> that will support ES5.
Subsequent releases will depend on ES6 features that are enabled by
<a href="https://nodejs.org/en/docs/es6/">default</a> in Node v4.0.0. Node v0.12.x will
continue to be supported, but will require setting the <code>--harmony</code> flag.</p>
<h3>Change Summary</h3>
<ul><li>Add support for <a href="https://nodejs.org/en/blog/release/v4.0.0/">Node v4.0.0</a>
<ul><li>Updated <code>ws</code> dependency from <code>0.7.1</code> to <code>0.8.0</code></li></ul>
</li><li>Bumped the minimum supported version of Node from <code>0.10.x</code> to <code>0.12.x</code>. This
is in accordance with the Node support policy established in <code>v2.45.0</code>.</li></ul>
<h2>v2.46.1</h2>
<ul><li>Fixed internal module loading on Windows.</li><li>Fixed error message format on timeouts for <code>until.elementLocated()</code>
and <code>until.elementsLocated()</code>.</li></ul>
<h2>v2.46.0</h2>
<ul><li>Exposed a new logging API via the <code>webdriver.logging</code> module. For usage, see
<code>example/logging.js</code>.</li><li>Added support for using a proxy server for WebDriver commands.
See <code>Builder#usingWebDriverProxy()</code> for more info.</li><li>Removed deprecated functions:
<ul><li>Capabilities#toJSON()</li><li>UnhandledAlertError#getAlert()</li><li>chrome.createDriver()</li><li>phantomjs.createDriver()</li><li>promise.ControlFlow#annotateError()</li><li>promise.ControlFlow#await()</li><li>promise.ControlFlow#clearHistory()</li><li>promise.ControlFlow#getHistory()</li></ul>
</li><li>Removed deprecated enum values: <code>ErrorCode.NO_MODAL_DIALOG_OPEN</code> and
<code>ErrorCode.MODAL_DIALOG_OPENED</code>. Use <code>ErrorCode.NO_SUCH_ALERT</code> and
<code>ErrorCode.UNEXPECTED_ALERT_OPEN</code>, respectively.</li><li>FIXED: The <code>promise.ControlFlow</code> will maintain state for promise chains
generated in a loop.</li><li>FIXED: Correct serialize target elements used in an action sequence.</li><li>FIXED: <code>promise.ControlFlow#wait()</code> now has consistent semantics for an
omitted or 0-timeout: it will wait indefinitely.</li><li>FIXED: <code>remote.DriverService#start()</code> will now fail if the child process dies
while waiting for the server to start accepting requests. Previously, start
would continue to poll the server address until the timeout expired.</li><li>FIXED: Skip launching Firefox with the <code>-silent</code> flag to preheat the profile.
Starting with Firefox 38, this would cause the browser to crash. This step,
which was first introduced for Selenium&#39;s java client back with Firefox 2,
no longer appears to be required.</li><li>FIXED: 8564: <code>firefox.Driver#quit()</code> will wait for the Firefox process to
terminate before deleting the temporary webdriver profile. This eliminates a
race condition where Firefox would write profile data during shutdown,
causing the <code>rm -rf</code> operation on the profile directory to fail.</li></ul>
<h2>v2.45.1</h2>
<ul><li>FIXED: 8548: Task callbacks are once again dropped if the task was cancelled
due to a previously uncaught error within the frame.</li><li>FIXED: 8496: Extended the <code>chrome.Options</code> API to cover all configuration
options (e.g. mobile emulation and performance logging) documented on the
ChromeDriver <a href="https://sites.google.com/a/chromium.org/chromedriver/capabilities">project site</a>.</li></ul>
<h2>v2.45.0</h2>
<h3>Important Policy Change</h3>
<p>Starting with the 2.45.0 release, selenium-webdriver will support the last
two stable minor releases for Node. For 2.45.0, this means Selenium will
support Node 0.10.x and 0.12.x. Support for the intermediate, un-stable release
(0.11.x) is &#34;best-effort&#34;. This policy will be re-evaluated once Node has a
major version release (i.e. 1.0.0).</p>
<h3>Change Summary</h3>
<ul><li>
<p>Added native browser support for Internet Explorer, Opera 26&#43;, and Safari</p>
</li><li>
<p>With the release of <a href="http://blog.nodejs.org/2015/02/06/node-v0-12-0-stable/">Node 0.12.0</a>
(finally!), the minimum supported version of Node is now <code>0.10.x</code>.</p>
</li><li>
<p>The <code>promise</code> module is now <a href="https://promisesaplus.com/">Promises/A&#43;</a>
compliant. The biggest compliance change is that promise callbacks are now
invoked in a future turn of the JS event loop. For example:</p>
<pre><code>  var promise &#61; require(&#39;selenium-webdriver&#39;).promise;
  console.log(&#39;start&#39;);
  promise.fulfilled().then(function() {
    console.log(&#39;middle&#39;);
  });
  console.log(&#39;end&#39;);

  // Output in selenium-webdriver&#64;2.44.0
  // start
  // middle
  // end
  //
  // Output in selenium-webdriver&#64;2.45.0
  // start
  // end
  // middle
</code></pre>
<p>The <code>promise.ControlFlow</code> class has been updated to track the asynchronous
breaks required by Promises/A&#43;, so there are no changes to task execution
order.</p>
</li><li>
<p>Updated how errors are annotated on failures. When a task fails, the
stacktrace from when that task was scheduled is appended to the rejection
reason with a <code>From:</code> prefix (if it is an Error object). For example:</p>
<pre><code>  var driver &#61; new webdriver.Builder().forBrowser(&#39;chrome&#39;).build();
  driver.get(&#39;http://www.google.com/ncr&#39;);
  driver.call(function() {
    driver.wait(function() {
      return driver.isElementPresent(webdriver.By.id(&#39;not-there&#39;));
    }, 2000, &#39;element not found&#39;);
  });
</code></pre>
<p>This code will fail an error like:</p>
<pre><code>  Error: element not found
  Wait timed out after 2002ms
      at &lt;stack trace&gt;
  From: Task: element not found
      at &lt;stack trace&gt;
  From: Task: WebDriver.call(function)
      at &lt;stack trace&gt;
</code></pre>
</li><li>
<p>Changed the format of strings returned by <code>promise.ControlFlow#getSchedule</code>.
This function now accepts a boolean to control whether the returned string
should include the stacktraces for when each task was scheduled.</p>
</li><li>
<p>Deprecating <code>promise.ControlFlow#getHistory</code>,
<code>promise.ControlFlow#clearHistory</code>, and <code>promise.ControlFlow#annotateError</code>.
These functions were all intended for internal use and are no longer
necessary, so they have been made no-ops.</p>
</li><li>
<p><code>WebDriver.wait()</code> may now be used to wait for a promise to resolve, with
an optional timeout. Refer to the API documentation for more information.</p>
</li><li>
<p>Added support for copying files to a remote Selenium via <code>sendKeys</code> to test
file uploads. Refer to the API documentation for more information. Sample
usage included in <code>test/upload_test.js</code></p>
</li><li>
<p>Expanded the interactions API to include touch actions.
See <code>WebDriver.touchActions()</code>.</p>
</li><li>
<p>FIXED: 8380: <code>firefox.Driver</code> will delete its temporary profile on <code>quit</code>.</p>
</li><li>
<p>FIXED: 8306: Stack overflow in promise callbacks eliminated.</p>
</li><li>
<p>FIXED: 8221: Added support for defining custom command mappings. Includes
support for PhantomJS&#39;s <code>executePhantomJS</code> (requires PhantomJS 1.9.7 or
GhostDriver 1.1.0).</p>
</li><li>
<p>FIXED: 8128: When the FirefoxDriver marshals an object to the page for
<code>executeScript</code>, it defines additional properties (required by the driver&#39;s
implementation). These properties will no longer be enumerable and should
be omitted (i.e. they won&#39;t show up in JSON.stringify output).</p>
</li><li>
<p>FIXED: 8094: The control flow will no longer deadlock when a task returns
a promise that depends on the completion of sub-tasks.</p>
</li></ul>
<h2>v2.44.0</h2>
<ul><li>
<p>Added the <code>until</code> module, which defines common explicit wait conditions.
Sample usage:</p>
<pre><code>  var firefox &#61; require(&#39;selenium-webdriver/firefox&#39;),
      until &#61; require(&#39;selenium-webdriver/until&#39;);

  var driver &#61; new firefox.Driver();
  driver.get(&#39;http://www.google.com/ncr&#39;);
  driver.wait(until.titleIs(&#39;Google Search&#39;), 1000);
</code></pre>
</li><li>
<p>FIXED: 8000: <code>Builder.forBrowser()</code> now accepts an empty string since some
WebDriver implementations ignore the value. A value must still be specified,
however, since it is a required field in WebDriver&#39;s wire protocol.</p>
</li><li>
<p>FIXED: 7994: The <code>stacktrace</code> module will not modify stack traces if the
initial parse fails (e.g. the user defined <code>Error.prepareStackTrace</code>)</p>
</li><li>
<p>FIXED: 5855: Added a module (<code>until</code>) that defines several common conditions
for use with explicit waits. See updated examples for usage.</p>
</li></ul>
<h2>v2.43.5</h2>
<ul><li>FIXED: 7905: <code>Builder.usingServer(url)</code> once again returns <code>this</code> for
chaining.</li></ul>
<h2>v2.43.2-4</h2>
<ul><li>No changes; version bumps while attempting to work around an issue with
publishing to npm (a version string may only be used once).</li></ul>
<h2>v2.43.1</h2>
<ul><li>Fixed an issue with flakiness when setting up the Firefox profile that could
prevent the driver from initializing properly.</li></ul>
<h2>v2.43.0</h2>
<ul><li>
<p>Added native support for Firefox - the Java Selenium server is no longer
required.</p>
</li><li>
<p>Added support for generator functions to <code>ControlFlow#execute</code> and
<code>ControlFlow#wait</code>. For more information, see documentation on
<code>webdriver.promise.consume</code>. Requires harmony support (run with
<code>node --harmony-generators</code> in <code>v0.11.x</code>).</p>
</li><li>
<p>Various improvements to the <code>Builder</code> API. Notably, the <code>build()</code> function
will no longer default to attempting to use a server at
<code>http://localhost:4444/wd/hub</code> if it cannot start a browser directly -
you must specify the WebDriver server with <code>usingServer(url)</code>. You can
also set the target browser and WebDriver server through a pair of
environment variables. See the documentation on the <code>Builder</code> constructor
for more information.</p>
</li><li>
<p>For consistency with the other language bindings, added browser specific
classes that can be used to start a browser without the builder.</p>
<pre><code>  var webdriver &#61; require(&#39;selenium-webdriver&#39;)
      chrome &#61; require(&#39;selenium-webdriver/chrome&#39;);

  // The following are equivalent.
  var driver1 &#61; new webdriver.Builder().forBrowser(&#39;chrome&#39;).build();
  var driver2 &#61; new chrome.Driver();
</code></pre>
</li><li>
<p>Promise A&#43; compliance: a promise may no longer resolve to itself.</p>
</li><li>
<p>For consistency with other language bindings, deprecated
<code>UnhandledAlertError#getAlert</code> and added <code>#getAlertText</code>.
<code>getAlert</code> will be removed in <code>2.45.0</code>.</p>
</li><li>
<p>FIXED: 7641: Deprecated <code>ErrorCode.NO_MODAL_DIALOG_OPEN</code> and
<code>ErrorCode.MODAL_DIALOG_OPENED</code> in favor of the new
<code>ErrorCode.NO_SUCH_ALERT</code> and <code>ErrorCode.UNEXPECTED_ALERT_OPEN</code>,
respectively.</p>
</li><li>
<p>FIXED: 7563: Mocha integration no longer disables timeouts. Default Mocha
timeouts apply (2000 ms) and may be changed using <code>this.timeout(ms)</code>.</p>
</li><li>
<p>FIXED: 7470: Make it easier to create WebDriver instances in custom flows for
parallel execution.</p>
</li></ul>
<h2>v2.42.1</h2>
<ul><li>FIXED: 7465: Fixed <code>net.getLoopbackAddress</code> on Windows</li><li>FIXED: 7277: Support <code>done</code> callback in Mocha&#39;s BDD interface</li><li>FIXED: 7156: <code>Promise#thenFinally</code> should not suppress original error</li></ul>
<h2>v2.42.0</h2>
<ul><li>Removed deprecated functions <code>Promise#addCallback()</code>,
<code>Promise#addCallbacks()</code>, <code>Promise#addErrback()</code>, and <code>Promise#addBoth()</code>.</li><li>Fail with a more descriptive error if the server returns a malformed redirect</li><li>FIXED: 7300: Connect to ChromeDriver using the loopback address since
ChromeDriver 2.10.267517 binds to localhost by default.</li><li>FIXED: 7339: Preserve wrapped test function&#39;s string representation for
Mocha&#39;s BDD interface.</li></ul>
<h2>v2.41.0</h2>
<ul><li>FIXED: 7138: export logging API from webdriver module.</li><li>FIXED: 7105: beforeEach/it/afterEach properly bind <code>this</code> for Mocha tests.</li></ul>
<h2>v2.40.0</h2>
<ul><li>API documentation is now included in the docs directory.</li><li>Added utility functions for working with an array of promises:
<code>promise.all</code>, <code>promise.map</code>, and <code>promise.filter</code></li><li>Introduced <code>Promise#thenCatch()</code> and <code>Promise#thenFinally()</code>.</li><li>Deprecated <code>Promise#addCallback()</code>, <code>Promise#addCallbacks()</code>,
<code>Promise#addErrback()</code>, and <code>Promise#addBoth()</code>.</li><li>Removed deprecated function <code>webdriver.WebDriver#getCapability</code>.</li><li>FIXED: 6826: Added support for custom locators.</li></ul>
<h2>v2.39.0</h2>
<ul><li>Version bump to stay in sync with the Selenium project.</li></ul>
<h2>v2.38.1</h2>
<ul><li>FIXED: 6686: Changed <code>webdriver.promise.Deferred#cancel()</code> to silently no-op
if the deferred has already been resolved.</li></ul>
<h2>v2.38.0</h2>
<ul><li>When a promise is rejected, always annotate the stacktrace with the parent
flow state so users can identify the source of an error.</li><li>Updated tests to reflect features not working correctly in the SafariDriver
(cookie management and proxy support; see issues 5051, 5212, and 5503)</li><li>FIXED: 6284: For mouse moves, correctly omit the x/y offsets if not
specified as a function argument (instead of passing (0,0)).</li><li>FIXED: 6471: Updated documentation on <code>webdriver.WebElement#getAttribute</code></li><li>FIXED: 6612: On Unix, use the default IANA ephemeral port range if unable to
retrieve the current system&#39;s port range.</li><li>FIXED: 6617: Avoid triggering the node debugger when initializing the
stacktrace module.</li><li>FIXED: 6627: Safely rebuild chrome.Options from a partial JSON spec.</li></ul>
<h2>v2.37.0</h2>
<ul><li>FIXED: 6346: The remote.SeleniumServer class now accepts JVM arguments using
the <code>jvmArgs</code> option.</li></ul>
<h2>v2.36.0</h2>
<ul><li><em>Release skipped to stay in sync with main Selenium project.</em></li></ul>
<h2>v2.35.2</h2>
<ul><li>FIXED: 6200: Pass arguments to the Selenium server instead of to the JVM.</li></ul>
<h2>v2.35.1</h2>
<ul><li>FIXED: 6090: Changed example scripts to use chromedriver.</li></ul>
<h2>v2.35.0</h2>
<ul><li>Version bump to stay in sync with the Selenium project.</li></ul>
<h2>v2.34.1</h2>
<ul><li>FIXED: 6079: The parent process should not wait for spawn driver service
processes (chromedriver, phantomjs, etc.)</li></ul>
<h2>v2.34.0</h2>
<ul><li>
<p>Added the <code>selenium-webdriver/testing/assert</code> module. This module
simplifies writing assertions against promised values (see
example in module documentation).</p>
</li><li>
<p>Added the <code>webdriver.Capabilities</code> class.</p>
</li><li>
<p>Added native support for the ChromeDriver. When using the <code>Builder</code>,
requesting chrome without specifying a remote server URL will default to
the native ChromeDriver implementation.  The
<a href="https://code.google.com/p/chromedriver/downloads/list">ChromeDriver server</a>
must be downloaded separately.</p>
<pre><code>  // Will start ChromeDriver locally.
  var driver &#61; new webdriver.Builder().
      withCapabilities(webdriver.Capabilities.chrome()).
      build();

  // Will start ChromeDriver using the remote server.
  var driver &#61; new webdriver.Builder().
      withCapabilities(webdriver.Capabilities.chrome()).
      usingServer(&#39;http://server:1234/wd/hub&#39;).
      build();
</code></pre>
</li><li>
<p>Added support for configuring proxies through the builder. For examples, see
<code>selenium-webdriver/test/proxy_test</code>.</p>
</li><li>
<p>Added native support for PhantomJS.</p>
</li><li>
<p>Changed signature of <code>SeleniumServer</code> to <code>SeleniumServer(jar, options)</code>.</p>
</li><li>
<p>Tests are now included in the npm published package. See <code>README.md</code> for
execution instructions</p>
</li><li>
<p>Removed the deprecated <code>webdriver.Deferred#resolve</code> and
<code>webdriver.promise.resolved</code> functions.</p>
</li><li>
<p>Removed the ability to connect to an existing session from the Builder. This
feature is intended for use with the browser-based client.</p>
</li></ul>
<h2>v2.33.0</h2>
<ul><li>Added support for WebDriver&#39;s logging API</li><li>FIXED: 5511: Added webdriver.manage().timeouts().pageLoadTimeout(ms)</li></ul>
<h2>v2.32.1</h2>
<ul><li>FIXED: 5541: Added missing return statement for windows in
<code>portprober.findFreePort()</code></li></ul>
<h2>v2.32.0</h2>
<ul><li>Added the <code>selenium-webdriver/testing</code> package, which provides a basic
framework for writing tests using Mocha. See
<code>selenium-webdriver/example/google_search_test.js</code> for usage.</li><li>For Promises/A&#43; compatibility, backing out the change in 2.30.0 that ensured
rejections were always Error objects. Rejection reasons are now left as is.</li><li>Removed deprecated functions originally scheduled for removal in 2.31.0
<ul><li>promise.Application.getInstance()</li><li>promise.ControlFlow#schedule()</li><li>promise.ControlFlow#scheduleTimeout()</li><li>promise.ControlFlow#scheduleWait()</li></ul>
</li><li>Renamed some functions for consistency with Promises/A&#43; terminology. The
original functions have been deprecated and will be removed in 2.34.0:
<ul><li>promise.resolved() -&gt; promise.fulfilled()</li><li>promise.Deferred#resolve() -&gt; promise.Deferred#fulfill()</li></ul>
</li><li>FIXED: remote.SeleniumServer#stop now shuts down within the active control
flow, allowing scripts to finish. Use #kill to shutdown immediately.</li><li>FIXED: 5321: cookie deletion commands</li></ul>
<h2>v2.31.0</h2>
<ul><li>Added an example script.</li><li>Added a class for controlling the standalone Selenium server (server
available separately)</li><li>Added a portprober for finding free ports</li><li>FIXED: WebElements now belong to the same flow as their parent driver.</li></ul>
<h2>v2.30.0</h2>
<ul><li>Ensures promise rejections are always Error values.</li><li>Version bump to keep in sync with the Selenium project.</li></ul>
<h2>v2.29.1</h2>
<ul><li>Fixed a bug that could lead to an infinite loop.</li><li>Added a README.md</li></ul>
<h2>v2.29.0</h2>
<ul><li>
<p>Initial release for npm:</p>
<pre><code>  npm install selenium-webdriver
</code></pre>
</li></ul>
</article></main><footer><div><a href="https://github.com/jleyba/js-dossier">Generated by dossier</a></div></footer></div><script src="../types.js"></script><script src="../dossier.js"></script>